<div id="nav_area">
  <h1 id="title">Citation Visualizer</h1>
  <ul id="nav_bar">
    <li>
      <a target="_blank" rel="noopener" href="https://angular.io/tutorial">Home</a>
    </li>
    <li>
      <a target="_blank" rel="noopener" href="https://angular.io/cli">About</a>
    </li>
    <li>
      <a target="_blank" rel="noopener" href="https://blog.angular.io/">Feedback</a>
    </li>
  </ul>
</div>

<div id="search_area">
  <h1>Input DOI</h1>
  <p>Example: 10.1038/nphys1170</p>
  <div id="search_bar">
    <input id="search_bar_input" type="text" name="queryMetadata" value="10.1210/edrv-16-1-3" #queryMetadata>
    <button class="search_area_button" (click)="doSearch(queryMetadata)" *ngIf="!get_data_status()"><i class="fas fa-search"></i></button>
    <button class="search_area_button" (click)="plot_graph(sortingOption, nodesOption, colorOption, seed.value)" *ngIf="get_data_status()"> <i class="fas fa-drafting-compass"></i></button>
    <!-- <button (click)="plot_graph()"> Plot Example</button> -->
  </div>
</div>

<div id="main_area">
  <div id="results_area" class="main_area_item">
    <div id="filter_area">
      <h4>Filter</h4>
      <input id="filter_bar" type="text" name="filterKeyword" (keyup)="onKey($event)">
      <h4 *ngIf="content_ready">{{statistic}}</h4>
    </div>
    <div id="results">
      <h4>Grouping Results</h4>
      <div class="results_list" *ngIf="content_ready">
        <div class="results_item" *ngFor="let key of get_grouping_key()">
          <mat-expansion-panel *ngIf="check_group_display_permission(key)">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{key}}<span class="dot" [style.background-color]="get_group_color(key)"></span>
              </mat-panel-title>
              <mat-panel-description></mat-panel-description>
            </mat-expansion-panel-header>
            <button class="result_item_group" (click)="select_group_node(key)">Select all</button>
            <mat-list class="results_mat_list" role="list" *ngIf="content_ready">
              <mat-list-item *ngFor="let DOI of get_grouping_result(key)">
                <button class="result_item_item" (click)="select_node(DOI)" *ngIf="get_display_permission(DOI)">{{DOI}}</button>
                <button class="result_item_item" (click)="open_new_tab(DOI)" *ngIf="get_display_permission(DOI)"><i class="fas fa-book-open"></i></button>
              </mat-list-item>
            </mat-list>
          </mat-expansion-panel>
        </div>
      </div>
      
    </div>
  </div>
  <div id="graph_area" class="main_area_item">
    <div id="mynetwork"></div>
  </div>
  <div id="options_area" class="main_area_item">
    <div class="option">
      <h4 class="option_heading">Data Sorting</h4>
      <mat-form-field>
        <mat-label>Sort data according to </mat-label>
        <mat-select [(value)] = "sortingOption">
          <mat-option *ngFor="let option of dataSortingOptions" [value]="option.value">
            {{option.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="option">
      <h4 class="option_heading">Number Of Nodes</h4>
      <mat-form-field>
        <mat-label>Number of nodes </mat-label>
        <mat-select [(value)]="nodesOption">
          <mat-option *ngFor="let option of noOfNodes" [value]="option.value">
            {{option.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="option">
      <h4 class="option_heading">Color</h4>
      <mat-form-field>
        <mat-label>Styling for graph</mat-label>
        <mat-select [(value)]="colorOption">
          <mat-option *ngFor="let option of colorOptions" [value]="option.value">
            {{option.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="option">
      <h4 class="option_heading">Import Seed</h4>
      <input id="seed_input" type="text" name="seed" #seed>
    </div>
<!--  *ngIf="content_ready" -->
    <div class="option" *ngIf="content_ready">
      <h4 class="option_heading">Export Seed</h4>
      <div id="export_seed">
        <button (click)="export_seed()">Click to export</button>
        <p>Seed: {{get_seed()}}</p>
      </div>
    </div>
  </div>
</div>

<div id="import_export_area">
  <textarea id="import_export_textarea" [(value)]="textArea" name="input_text" #input_text></textarea>
  <button (click)="import_data(input_text.value)">Import</button>
  <button (click)="export_data()">Export</button>
</div>